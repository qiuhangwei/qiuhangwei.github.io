(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,n){},154:function(e,t,n){},182:function(e,t,n){e.exports=n(330)},232:function(e,t){},284:function(e,t,n){},330:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),o=n.n(c),i=n(178),l=n(28),s=n(29),u=n(31),d=n(30),p=n(32),m=function(e,t){return t.map(function(t){return e[t]})},f=n(78),h=(n(74),n(154),n(333)),b=n(335),y=(n(284),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={sizeSelected:""},n.handleSizeChange=function(e){console.log(e),n.setState({sizeSelected:e.target.value})},n.handleOk=function(){var e=n.state.sizeSelected;n.props.onOk(e)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(h.a,{title:"\u8bf7\u9009\u62e9\u5c3a\u7801",visible:this.props.visible,onCancel:this.props.onCancel,onOk:this.handleOk},r.a.createElement(b.a.Group,{options:this.props.sizes,optionType:"button",onChange:this.handleSizeChange.bind(this)})))}}]),t}(r.a.Component)),v=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={availableSizes:[],visible:!1,currentId:""},n.doAddToCart=function(e,t){n.setState({availableSizes:t,visible:!0,currentId:e})},n.onCancel=function(){n.setState({visible:!1})},n.onOk=function(e){console.log(e),e&&n.props.addToCart(n.state.currentId,e),n.setState({visible:!1})},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.products,a=(t.addToCart,t.select),c=this.state,o=c.availableSizes,i=c.visible,l=(0===a.productSize.length?n:a.productSize).map(function(t,n){return console.log("\u827e\u7279\u6728",t),r.a.createElement("div",{key:n,className:"item-cloth"},r.a.createElement("div",{className:"pname"},r.a.createElement("img",{src:"./static/products/".concat(t.sku,"_1.jpg"),alt:""}),r.a.createElement("div",null,t.title),r.a.createElement("div",null,"price:$",Number(t.price).toFixed(2)),r.a.createElement("div",null,"installments:",t.installments,"*",Math.round(t.price/t.installments*100)/100,"$")),r.a.createElement("div",{className:"item-button"},r.a.createElement(f.a,{className:"buttons",type:"primary",onClick:e.doAddToCart.bind(e,t.id,t.availableSizes),disabled:!t.installments},r.a.createElement("p",{style:{margin:"auto",lineHeight:"0px"}},"\u6dfb\u52a0\u8d2d\u7269\u8f66"))))});return r.a.createElement("div",null,r.a.createElement("div",{className:"item"},l),r.a.createElement(y,{sizes:o,visible:i,onCancel:this.onCancel.bind(this),onOk:this.onOk.bind(this)}))}}]),t}(r.a.Component),g=Object(c.connect)(function(e){var t=e.products,n=e.selected;return console.log("\u666e\u7f57\u8fbe\u514b\u8328",n),{products:m(t.byId,t.result),select:n}},function(e){return{addToCart:function(t,n){return e({type:"cart/add",payload:{id:t,size:n}})}}})(v),O=n(337),j=(n(121),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.addToSize,t=O.a.Group,n=["XS","S","M","ML","L","XL","XXL"];return r.a.createElement("div",{className:"size-checkbox"},r.a.createElement("span",{style:{fontSize:"30px"}},"Size:"),r.a.createElement(t,{options:n,onChange:function(t){console.log("\u770b\u770b\u503c",t),t=0==t.length?n:t,e(t)}}))}}]),t}(r.a.Component)),E=Object(c.connect)(null,function(e){return{addToSize:function(t){return e({type:"selected/add",payload:{size:t}})}}})(j),w=n(16),S=n(10),k=n(338),x=n(334),C=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,placement:"right"},n.showDrawer=function(){n.setState({visible:!0})},n.onClose=function(){n.setState({visible:!1})},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.products,n=e.subtotal,a=e.onCheckout,c=e.loading,o=e.checking,i=e.num,l=e.deleteProducts,s=e.doDecrease,u=e.doIncrease,d=t.map(function(e,t){return r.a.createElement("div",{key:t,style:{marginBottom:"10px"}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("div",null,r.a.createElement("img",{style:{width:"30px",height:"40px"},src:"./static/products/".concat(e.sku,"_1.jpg"),alt:""})),r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement("div",null,e.title,"\xa0\xa0",e.size),r.a.createElement("div",null,e.price," x ",e.quantity)),r.a.createElement("div",null,r.a.createElement("button",{className:"cart-button",disabled:1==e.quantity,onClick:function(){return s(e.id)}},"-"),r.a.createElement("button",{className:"cart-button",onClick:function(){return u(e.id)}},"+")),r.a.createElement(f.a,{onClick:function(){return l(e.id,e.quantity)},style:{width:"20px",height:"20px",padding:"0",float:"right"}},r.a.createElement(S.a,{type:"close",style:{fontSize:"20px"}}))))});return r.a.createElement("div",{style:{display:"flex",width:"100%",paddingTop:"20px"}},r.a.createElement(f.a,{style:{height:"64px",display:"flex",marginLeft:"auto",border:"none"},onClick:this.showDrawer},r.a.createElement("span",{style:{marginRight:24}},r.a.createElement(k.a,{count:i},r.a.createElement(S.a,{type:"shopping-cart",style:{fontSize:"50px"}})))),r.a.createElement(x.a,{title:"\u8d2d\u7269\u8f66",placement:this.state.placement,closable:!1,onClose:this.onClose,visible:this.state.visible},r.a.createElement("div",{style:{listStyle:"none"}},d),r.a.createElement("div",null,"Total: ",n),r.a.createElement("div",null,o&&r.a.createElement("div",{style:{color:"red"}},"Checking ..."),r.a.createElement(f.a,{onClick:a,disabled:n<=0||c},r.a.createElement("p",{style:{margin:"auto",lineHeight:"0px"}},"Checkout")))))}}]),t}(r.a.Component),z=Object(c.connect)(function(e){var t=e.cart,n=e.products,a=e.loading;return console.log("\u5361\u7279",t,n),{products:t.added.map(function(e){return Object(w.a)({},n.byId[e],{quantity:t.quantities[e]})}),subtotal:t.added.reduce(function(e,a){return n.byId[a].price*t.quantities[a]+e},0).toFixed(2),loading:a.models.cart,checking:a.effects["cart/checkout"],num:t.num}},function(e){return{onCheckout:function(){return e({type:"cart/checkout"})},deleteProducts:function(t,n){return e({type:"cart/delete",payload:{log:t,num:n}})},doDecrease:function(t){return e({type:"cart/minus",payload:{id:t}})},doIncrease:function(t){return e({type:"cart/add",payload:{id:t}})}}})(C),q=n(332),N=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).Highest=function(){},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=q.a.Option,t=this.props,n=t.products,a=t.select,c=t.OnChange,o=[r.a.createElement(e,{key:"default"},"\u9ed8\u8ba4\u6392\u5e8f"),r.a.createElement(e,{key:"Highest"},"\u4ef7\u683c\u7531\u9ad8\u5230\u4f4e"),r.a.createElement(e,{key:"lowest"},"\u4ef7\u683c\u7531\u4f4e\u5230\u9ad8")];return r.a.createElement("div",{style:{paddingLeft:"150px"}},r.a.createElement("h1",null,0===a.productSize.length?n.length:a.productSize.length," \u4ef6\u76f8\u5173\u8d27\u7269"),r.a.createElement("div",{id:"components-dropdown-demo-dropdown-button"},r.a.createElement(q.a,{defaultValue:"\u9ed8\u8ba4\u6392\u5e8f",onChange:function(e){return c(e,a.size)},style:{width:200}},o)))}}]),t}(r.a.Component),I=Object(c.connect)(function(e){var t=e.products,n=e.selected;return console.log("\u65af\u83b1\u514b\u63d0\u5fb7",n),{products:m(t.byId,t.result),select:n}},function(e){return{OnChange:function(t,n){return e({type:"selected/add",payload:{change:t,size:n}})}}})(N),T=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)({type:"products/query"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"app-index"},r.a.createElement("div",null,r.a.createElement(E,null)),r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement(g,null)),r.a.createElement("div",null,r.a.createElement(z,null)))}}]),t}(r.a.Component),L=Object(c.connect)()(T),A=n(17),P=n.n(A),X=n(127),J=n(176),M=n.n(J),D=function(){return M.a.get("products.json")},H=function(e){return new Promise(function(t,n){return setTimeout(function(){return t(e)},2e3)})},G=new X.b.Entity("products"),F={namespace:"products",state:window.localStorage.localProducts?JSON.parse(window.localStorage.localProducts):{result:[],byId:{}},effects:{query:P.a.mark(function e(t,n){var a,r,c;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.call,r=n.put,e.next=3,a(D);case 3:return c=e.sent,e.next=6,r({type:"setProducts",payload:Object(X.a)(c.data,[G])});case 6:case"end":return e.stop()}},e)})},reducers:{setProducts:function(e,t){var n=t.payload;return Object(w.a)({},e,{byId:n.entities.products,result:n.result})}}},$=n(54),_=n(55),B=n(336),R=window.localStorage.localCart?JSON.parse(window.localStorage.localCart):{added:[],quantities:{},addedSelect:[],num:0},V={namespace:"cart",state:R,effects:{add:P.a.mark(function e(t,n){var a,r,c,o,i,l,s,u,d;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,r=a.id,c=a.size,o=n.put,i=n.select,e.next=4,i(function(e){return e.products.byId[r]});case 4:return l=e.sent,console.log("product",l),e.next=8,l.size=c;case 8:return e.next=10,i();case 10:return s=e.sent,u=s.cart,d=u.num+1,e.next=15,o({type:"addToCart",payload:{id:r,num:d}});case 15:case"end":return e.stop()}},e)}),minus:P.a.mark(function e(t,n){var a,r,c,o,i,l,s;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload.id,r=n.put,c=n.select,e.next=4,c(function(e){return e.products.byId[a]});case 4:return o=e.sent,console.log("product",o),e.next=8,c();case 8:return i=e.sent,l=i.cart,s=l.num-1,e.next=13,r({type:"decrease",payload:{id:a,num:s}});case 13:case"end":return e.stop()}},e)}),checkout:P.a.mark(function e(t,n){var a,r,c,o,i,l;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,a=n.call,r=n.put,c=n.select,e.next=4,c();case 4:return o=e.sent,i=o.cart,console.log("checkout cart",i),e.next=9,window.localStorage.removeItem("localCart");case 9:return e.next=11,a(H,i);case 11:return l=e.sent,e.next=14,r({type:"checkoutCompleted",payload:l});case 14:return e.next=16,B.a.success("\u6210\u529f\u652f\u4ed8");case 16:return e.next=18,window.location.reload();case 18:case"end":return e.stop()}},e)}),delete:P.a.mark(function e(t,n){var a,r,c,o,i,l,s,u,d,p;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,r=a.log,c=a.num,o=n.put,i=n.select,e.next=4,i();case 4:return l=e.sent,s=l.cart,u=function(e){return e!==r},d=s.num-c,p=s.added.filter(u),console.log(s.quantities),e.next=12,o({type:"deletelog",payload:{deleteAdded:p,deleteNum:d,log:r}});case 12:case"end":return e.stop()}},e)})},reducers:{addToCart:function(e,t){var n=t.payload,a=n.id,r=n.num;return console.log("state",e),window.localStorage.localCart=JSON.stringify(Object(w.a)({},e,{added:e.added.includes(a)?Object(_.a)(e.added):[].concat(Object(_.a)(e.added),[a]),quantities:Object(w.a)({},e.quantities,Object($.a)({},a,(e.quantities[a]||0)+1)),num:r})),Object(w.a)({},e,{added:e.added.includes(a)?Object(_.a)(e.added):[].concat(Object(_.a)(e.added),[a]),quantities:Object(w.a)({},e.quantities,Object($.a)({},a,(e.quantities[a]||0)+1)),num:r})},decrease:function(e,t){var n=t.payload,a=n.id,r=n.num;return console.log("state",e),Object(w.a)({},e,{added:e.added.includes(a)?Object(_.a)(e.added):[].concat(Object(_.a)(e.added),[a]),quantities:Object(w.a)({},e.quantities,Object($.a)({},a,(e.quantities[a]||0)-1)),num:r})},checkoutCompleted:function(){return R},deletelog:function(e,t){var n=t.payload,a=n.deleteAdded,r=n.deleteNum,c=n.log;return Object(w.a)({},e,{added:a,num:r,quantities:Object(w.a)({},e.quantities,Object($.a)({},c,0))})}}},K={namespace:"selected",state:{size:["XS","S","M","ML","L","XL","XXL"],productSize:[],change:"default"},effects:{add:P.a.mark(function e(t,n){var a,r,c,o,i,l,s,u,d,p;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,r=a.size,c=a.change,o=n.put,i=n.call,e.next=4,i(D);case 4:return l=e.sent,s=function(e){for(var t=0;t<r.length;t++)for(var n=0;n<e.availableSizes.length;n++)if(r[t]===e.availableSizes[n])return e},u=l.data.filter(s),d=c,p=l.data.filter(s),console.log(u),e.next=12,o({type:"addToSize",payload:{size:r,productSize:u,changes:d,products:p}});case 12:case"end":return e.stop()}},e)})},reducers:{addToSize:function(e,t){var n=t.payload,a=n.size,r=n.productSize,c=n.changes,o=n.products;return Object(w.a)({},e,{size:a,productSize:"default"===c?o:"Highest"===c?r.sort(function(e,t){return t.price-e.price}):r.sort(function(e,t){return e.price-t.price}),change:c})}}},Q=o()({onStateChange:function(e){console.log("\u53d8\u4e86",e),window.localStorage.localProducts=JSON.stringify(e.products)}});Q.model(F),Q.model(V),Q.model(K),Q.use(Object(i.a)()),Q.router(function(){return r.a.createElement(L,null)}),Q.start("#root")}},[[182,1,2]]]);
//# sourceMappingURL=main.5599ce34.chunk.js.map